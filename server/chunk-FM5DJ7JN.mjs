import{a as E,b as f,c as V,d as I,e as N,f as k,g as D,h as G,i as T,j,k as q}from"./chunk-QSXUJ6SF.mjs";import{a as U}from"./chunk-SIBW56CM.mjs";import{Aa as C,B as R,Ea as n,Ga as M,J as v,Q as d,Sa as _,W as y,Wa as F,X as S,Ya as z,ca as s,f as x,fa as w,ma as p,oa as c,p as h,ra as m,t as P,va as e,wa as t,x as b,xa as u,za as L}from"./chunk-7255E2OS.mjs";x();v();_();R();P();z();_();function A(i,g){if(i&1&&(e(0,"div",14),n(1),t()),i&2){let l=C();s(),M(" ",l.errorMessage," ")}}function H(i,g){i&1&&(e(0,"span"),n(1,"Sign in"),t())}function B(i,g){i&1&&(e(0,"span"),n(1,"Signing in..."),t())}var ee=(()=>{class i{constructor(){this.http=d(h),this.fb=d(T),this.urlService=d(U),this.router=d(b),this.errorMessage="",this.isLoading=!1}ngOnInit(){this.loginForm=this.fb.group({username:["",[f.required]],password:["",[f.required]]})}onSubmit(){if(this.loginForm.invalid){this.errorMessage="Please fill in all fields";return}this.errorMessage="",this.isLoading=!0;let{username:l,password:a}=this.loginForm.value,o=new FormData;o.append("username",l),o.append("password",a),this.http.post(`${this.urlService.URLS.LOGIN}`,o).subscribe({next:r=>{r.access_token?(localStorage.setItem("access_token",r.access_token),this.router.navigate(["/chat-assistant"])):this.errorMessage="Invalid response from server",this.isLoading=!1},error:r=>{console.error("Login error:",r),r.status===401?this.errorMessage="Invalid username or password":r.status===0?this.errorMessage="Unable to connect to server. Please check your connection.":this.errorMessage=r.error?.detail||"An error occurred during login",this.isLoading=!1}})}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-login"]],decls:29,vars:5,consts:[[1,"min-h-screen","decorative-pattern","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8","bg-white","p-8","rounded-lg","shadow-xl","relative","z-10"],[1,"text-center"],[1,"flex","justify-center","mb-4"],["viewBox","0 0 24 24","fill","currentColor",1,"h-16","w-16","text-blue-600"],["d","M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"],[1,"mt-2","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"rounded-md","shadow-sm","-space-y-px"],["for","username",1,"sr-only"],["id","username","formControlName","username","type","text","required","","placeholder","Username",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-t-md","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","focus:z-10","sm:text-sm"],["for","password",1,"sr-only"],["id","password","formControlName","password","type","password","required","","placeholder","Password",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-b-md","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","focus:z-10","sm:text-sm"],[1,"text-red-500","text-sm","text-center"],[1,"flex","items-center","justify-end"],[1,"text-sm"],["href","#",1,"font-medium","text-blue-600","hover:text-blue-500"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(a,o){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(),e(4,"svg",4),u(5,"path",5),t()(),S(),e(6,"h2",6),n(7,"School AI"),t(),e(8,"p",7),n(9," Intelligent School Management System "),t()(),e(10,"form",8),L("ngSubmit",function(){return o.onSubmit()}),e(11,"div",9)(12,"div")(13,"label",10),n(14,"Username"),t(),u(15,"input",11),t(),e(16,"div")(17,"label",12),n(18,"Password"),t(),u(19,"input",13),t()(),p(20,A,2,1,"div",14),e(21,"div",15)(22,"div",16)(23,"a",17),n(24," Forgot your password? "),t()()(),e(25,"div")(26,"button",18),p(27,H,2,0,"span")(28,B,2,0,"span"),t()()()()()),a&2&&(s(10),c("formGroup",o.loginForm),s(10),m(o.errorMessage?20:-1),s(6),c("disabled",o.isLoading||o.loginForm.invalid),s(),m(o.isLoading?-1:27),s(),m(o.isLoading?28:-1))},dependencies:[j,N,E,V,I,G,F,q,k,D],encapsulation:2})}}return i})();export{ee as LoginComponent};
